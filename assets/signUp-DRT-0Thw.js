import{r as u,u as w,c as m,a as t,w as a,v as n,b as v,d as C,e as b,S as i,f as x,g as h,o as p,h as k}from"./index-BDYkzB7u.js";const y={id:"signUpPage",class:"bg-yellow"},B={class:"conatiner signUpPage vhContainer"},U={class:"formControls",action:"index.html"},_={key:0},P="https://todolist-api.hexschool.io",q={__name:"signUp",setup(V){const d=u(""),r=u(""),f=w(),e=u({email:"",password:"",nickname:""}),c=async()=>{if(e.value.password!==r.value)return i.fire({position:"top",title:"密碼不相同",icon:"error",timer:1e3,toast:!0,showConfirmButton:!1,timerProgressBar:!0});if(!e.value.email||!e.value.password||!e.value.nickname||!r.value)return i.fire({position:"top",title:"資料不齊全",icon:"error",timer:1e3,toast:!0,showConfirmButton:!1,timerProgressBar:!0});try{const l=await x.post(`${P}/users/sign_up`,e.value);d.value=l.data.uid,i.fire({position:"top",title:"註冊成功，導回登入頁",icon:"success",timer:1e3,toast:!0,showConfirmButton:!1,timerProgressBar:!0}),f.push({path:"/"})}catch(l){if(l.name==="AxiosError")return i.fire({position:"top",title:"用戶已存在",icon:"error",timer:1e3,toast:!0,showConfirmButton:!1,timerProgressBar:!0})}};return(l,o)=>{const g=h("RouterLink");return p(),m("div",y,[t("div",B,[o[10]||(o[10]=t("div",{class:"side"},[t("a",{href:"#"},[t("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),t("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),t("div",null,[t("form",U,[o[5]||(o[5]=t("h2",{class:"formControls_txt"},"註冊帳號",-1)),o[6]||(o[6]=t("label",{class:"formControls_label",for:"email"},"Email",-1)),a(t("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":o[0]||(o[0]=s=>e.value.email=s),required:""},null,512),[[n,e.value.email]]),o[7]||(o[7]=t("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),a(t("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":o[1]||(o[1]=s=>e.value.nickname=s)},null,512),[[n,e.value.nickname]]),o[8]||(o[8]=t("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),a(t("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼","onUpdate:modelValue":o[2]||(o[2]=s=>e.value.password=s),required:""},null,512),[[n,e.value.password]]),o[9]||(o[9]=t("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),a(t("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請再次輸入密碼","onUpdate:modelValue":o[3]||(o[3]=s=>r.value=s),required:""},null,512),[[n,r.value]]),e.value.password!==r.value?(p(),m("span",_,"密碼不相同")):v("",!0),t("input",{class:"formControls_btnSubmit",type:"button",value:"註冊帳號",onClick:c}),C(g,{class:"formControls_btnLink",to:"/"},{default:b(()=>o[4]||(o[4]=[k("登入")])),_:1})])])])])}}};export{q as default};
